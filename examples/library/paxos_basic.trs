protocol PaxosBasic {
    params n, t, f, gst;
    resilience: n > 3*t;
    adversary {
        model: crash;
        bound: f;
        values: sign;
    }

    message Prepare(round: nat);
    message Promise(round: nat);
    message Accept(round: nat);
    message Learn(round: nat);

    role Replica {
        var decided: bool = false;
        init pre;

        phase pre {
            when received >= 2*t+1 Learn(round=0) => {
                decided = true;
                goto phase decided;
            }
        }

        phase decided {}
    }

    property agreement: agreement {
        forall p: Replica. forall q: Replica. p.decided == q.decided
    }
}
